debug: false

gameapi_token: xxx

fifth_anniv_regions: ["jp"]

draw:
  default_watermark: "Designed by NeuraXmy(ルナ茶), generated by Lunabot (XXX deployed)"
  blurglass: true
  widget_bg_color: [255, 255, 255, 100]
  widget_bg_radius: 10

bind:
  daily_limits:
    jp: 5
    cn: 5
    tw: 5
    kr: 5
    en: 5
  total_limits:
    jp: 5
    cn: 5
    tw: 5
    kr: 5
    en: 5

profile:
  limited_time_custom_frames:
    - path: "custom_frames/xmas.png"
      scale: 1.3
      periods: 
        - ["12-16 00:00", "12-26 06:00"]
  bg_image_size: 
    horizontal: [1300, 650]
    vertical: [720, 1280]
  bg_image_save_kwargs:
    quality: 75
    subsampling: 1
    optimize: true
    progressive: true

suite_path: data/sekai/user_data/{region}/suite/*
mysekai_path: data/sekai/user_data/{region}/mysekai/*

story_summary:
  output_as_image: true
  card:
    retry: 2
    timeout: 300
    output_len_limit: 2000
  event:
    retry: 2
    timeout: 300
    output_len_limit: 1000
    target_len_long: 200
    target_len_short: 200
    output_progress: true

stamp:
  gif_scale: 2.0
  cutout:
    enable: false
    daily_limit: 5
    tolerance: 50
    edge: 20
    max_transparent_ratio: 0.5
    prompt: |
      请你将第一张图片的文字去掉，保留其他部分内容、大小比例严格不变
      注意需要保留完整闭合的白色边缘（如果原图的白色边缘没有完整闭合，你需要额外补上白色边界）
      第二张图片仅用于被文字遮挡部分的角色外观的参考，但仍然需要优先保留第一张图片的外观

deck:
  servers:
    - url: http://127.0.0.1:12345
      weight: 4 # 负载均衡权重
    - url: http://127.0.0.1:45678
      weight: 8

  music_meta_url: https://storage.sekai.best/sekai-best-assets/music_metas.json
  data_update_interval_seconds: 30
  default_algs: ['dfs', 'ga']

  return_deck_num:
    multi: 6
    challenge: 6
    mysekai: 6
    bonus: 1

  timeout:
    default: 5
    no_event: 5
    single_alg: 60
    bonus_target: 10

  default_musicdiffs:
    event:
      multi: 
        - [omakase, master]
      solo:
        - [74, expert]  # 红虾
      auto:
        - [186, master] # 紫盘古
    challenge:
      challenge:
        - [610, master] # 紫北极星
        - [104, master] # 紫10th
      challenge_auto:
        - [610, master] # 紫北极星
        - [104, master] # 紫10th

  challenge_music_auto_recommend:
    enabled: true
    rules:
      - music: [610, master]  # 紫北极星
        fc_requires: { 'master_31': 5 }
      - music: [6, append]    # 火花apd
        fc_requires: { 'append_34': 1 }
      - music: [141, append]  # 群青apd
        fc_requires: { 'append_29': 3 }
      - music: [540, master]  # 紫虚无
        fc_requires: { 'master_29': 5 }
      - music: [104, master]  # 紫10th
        fc_requires: { 'master_29': 5 }
      - music: [62, expert]   # 红jsg
        fc_requires: { 'expert_26': 5 }
      - music: [74, expert]   # 红虾
        fc_requires: {}

gacha:
  list_page_size: 100
  spin_result_show_num: 
    rarity_1: 10
    rarity_2: 10
    rarity_3: 10
    rarity_4: 100
    rarity_birthday: 100
    pickup: 100

mysekai:
  msr_push_interval_seconds: 3
  msr_push_concurrency: 4

  map_image_scale: 0.75
  map_brightness: 1.0
  rare_res_light:
    map_brightness_effect: 0.5
    large_size: 7.0
    small_size: 5.0

  rare_res_keys:
    1: 
      - mysekai_material_32
      - mysekai_material_33
      - mysekai_material_34
      - mysekai_material_61
      - mysekai_material_64
      - mysekai_material_65
      - mysekai_material_66
      - mysekai_material_93
      - mysekai_material_94
      - mysekai_music_record_0~9999
    2:
      - mysekai_material_5
      - mysekai_material_12
      - mysekai_material_20
      - mysekai_material_24
      - mysekai_fixture_121
      - material_17
      - material_170
      - material_173
      - mysekai_material_67~92
      - material_174~203

sk:
  record_interval_seconds: 60
  high_res_record:  # 高精度榜线记录
    interval_seconds: 10
    ranks:  # 应用高精度的排名档位范围
      jp: [[1, 10]]
    uids:   # 应用高精度的uid列表
      jp: ["12344532534324132"]
  record_interval_tolerance: 70  # 超过该容差认为有记录丢失

  plot_point_num_limit: 5000

  record_time_after_event_end_minutes: 0
  update_ranking_log_interval: 30
  csb_judge_stop_threshold_minutes: 5
  
  backup:
    interval_seconds: 21600
    threshold_days: 5
    pybd_upload: false
    pybd_remote_dir: "LunabotSekaiRankingData"
    pybd_verbose: true

  start_forecast_hours_after_event_start: 2 
  stop_forecast_hours_before_event_end: 2
  forecast:
    local:
      name: "本地预测"
      enabled: false
      regions: ["jp", "en", "tw", "cn"]
      support_wl: false
      show_history: true
      update_interval_minutes: 20
      error_retry_minutes: 20
      sample_interval_minutes: 10
      start_after_hours: 1
      end_before_hours: 4
      ranks: [100, 500, 1000, 5000, 10000]

    33kit:
      name: "33Kit预测"
      enabled: true
      regions: ["jp"]
      support_wl: false
      show_history: true
      update_interval_minutes: 20
      error_retry_minutes: 10
      url: https://sekai-data.3-3.dev/predict.json

    snowy:
      name: "SnowyBot预测"
      enabled: true
      regions: ['jp', 'cn']
      support_wl: false
      show_history: true
      update_interval_minutes: 10
      error_retry_minutes: 10
      url: https://sekaibangdan.exmeaning.com/api/public/v1/{region}data/{event_id}
      ranks: [10, 30, 50, 100, 200, 300, 500, 1000, 2000, 3000, 5000, 10000, 50000, 100000]

    sekarun:
      name: "SekaRun预测"
      enabled: true
      regions: ['jp', 'en', 'tw', 'kr']
      support_wl: false
      show_history: true
      update_interval_minutes: 10
      error_retry_minutes: 10
      url: https://jiiku831.github.io/{region}data/sekarun.js
      ranks: [10, 30, 50, 100, 200, 300, 500, 1000, 2000, 3000, 5000, 10000, 50000, 100000]
  
chart:
  style_sheet_name: black
  target_segment_seconds: 6.0
  max_resolution: [4096, 4096]

music:
  constant:
    enabled: true # 禁用后使用相关功能会直接提示不可用
    csv_path: ""  # 歌曲定数csv路径，需包含 id,difficulty,constant 三列
    info_text: |
      该bot的定数表未配置