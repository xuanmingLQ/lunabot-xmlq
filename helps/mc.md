# Minecraft服务 (mc)

基于服务端卫星地图插件或日志监听服务以及 RCON 协议，提供 Minecraft 服务器对接的服务。  
- 一个群聊对应一个Minecraft服务器
- 服务器和玩家状态查询，服务器断线上线提醒
- 玩家上下线通知，玩家游玩时间统计
- 服务器聊天和群聊天同步
- 远程执行服务器指令

监听分为卫星地图和日志两种模式
- 卫星地图模式通过dynamic map插件获取服务器信息和聊天记录、发送消息
- 日志模式通过日志文件获取聊天记录，通过rcon获取服务器信息和发送消息

---

## 指令目录

标记 🛠️ 的指令仅限超级管理使用  
标记 ⚙️ 的指令仅限超级管理和服务器op使用  

- [发送消息](#发送消息)
- ⚙️ [设置或查询监听模式](#设置或查询监听模式)
- [获取服务器信息](#获取服务器信息)
- ⚙️ [设置服务器信息](#设置服务器信息)
- [获取监听链接](#获取监听链接)
- ⚙️ [设置监听链接](#设置监听链接)
- [获取rcon链接](#获取rcon链接)
- ⚙️ [设置rcon链接](#设置rcon链接)
- ⚙️ [设置rcon密码](#设置rcon密码)
- ⚙️ [发送rcon命令](#发送rcon命令)
- [查询游玩时间](#查询游玩时间)
- ⚙️ [清空游玩时间](#清空游玩时间)
- ⚙️ [切换新周目](#切换新周目)
- [获取请求时间偏移](#获取请求时间偏移)
- ⚙️ [设置请求时间偏移](#设置请求时间偏移)
- [获取聊天前缀](#获取聊天前缀)
- ⚙️ [设置聊天前缀](#设置聊天前缀)
- ⚙️ [开启/关闭服务器连线断线通知](#开启关闭服务器连线断线通知)
- [查看op列表](#查看op列表)
- 🛠️ [添加op](#添加op)
- 🛠️ [删除op](#删除op)


---

### 发送消息
`/send`
> 向服务器发送消息，服务器中会显示发送者的群名片

- `/send 你好`


### 设置或查询监听模式
⚙️ `/listen`
> 设置或查询群聊中服务器的监听模式  
off: 关闭监听  
dynamicmap: 通过卫星地图监听  
log: 通过日志文件服务端监听   

- `/listen` 查询监听模式
- `/listen dynamicmap` 设置监听模式为卫星地图


### 获取服务器信息
`/info`
> 获取服务器信息，包括预设的服务器信息以及服务器游戏时间、在线玩家状态


### 设置服务器信息
⚙️ `/setinfo`
> 设置服务器信息

- `/setinfo 服务器信息`


### 获取监听链接
`/geturl`
> 获取服务器监听链接


### 设置监听链接
⚙️ `/seturl`
> 设置服务器监听链接

- `/seturl http://x.x.x.x:xxxx`


### 获取rcon链接
`/getrconurl`
> 获取服务器rcon链接


### 设置rcon链接
⚙️ `/setrconurl`
> 设置服务器rcon链接

- `/setrconurl http://x.x.x.x:xxxx`


### 设置rcon密码
⚙️ `/setrconpw`
> 设置服务器rcon密码，需要在私聊中使用

- `/setrconpw 12345678 password` 设置群聊12345678的rcon密码为password


### 发送rcon命令
⚙️ `/rcon`
> 发送rcon命令

- `/rcon say hello`


### 查询游玩时间
`/playtime`
> 查询当前周目的玩家游玩时间


### 清空游玩时间
⚙️ `/playtime clear`
> 清空当前周目的玩家游玩时间


### 切换新周目
⚙️ `/start game`
> 切换到新周目

- `/start game GameName`


### 获取请求时间偏移
`/getoffset`
> 获取卫星地图监听的请求时间偏移，单位为ms


### 设置请求时间偏移
⚙️ `/setoffset`
> 设置获取卫星地图监听的请求时间偏移，单位为ms

- `/setoffset 1000`


### 获取聊天前缀
`/getchatprefix`
> 获取服务器聊天前缀   
只有游戏中以前缀开头的消息以及/send发送的消息会被转发到群内


### 设置聊天前缀
⚙️ `/setchatprefix`  
> 设置服务器聊天前缀   
只有游戏中以前缀开头的消息以及/send发送的消息会被转发到群内

- `/setchatprefix xxx`


### 开启/关闭服务器连线断线通知
⚙️ `/connect notify on` `/connect notify off`
> 开启或关闭服务器连线断线通知

- `/connect notify on` 开启服务器连线断线通知
- `/connect notify off` 关闭服务器连线断线通知


### 查看op列表
`/oplist`
> 查看当前群聊的op列表


### 添加op
🛠️ `/op add`
> 添加op到当前群聊的op列表，一次可以@一个或多个成员

- `/op add @成员1 @成员2`


### 删除op
🛠️ `/op del`
> 从当前群聊的op列表中删除op，一次可以@一个或多个成员

- `/op del @成员1 @成员2`


---

[回到帮助目录](./main.md)